generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("EXTERNAL_DB_URL")
}

model addresses {
  id         String    @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  userId     String    @db.Uuid
  street     String
  city       String
  state      String
  country    String
  postalCode String
  isDefault  Boolean?  @default(false)
  createdAt  DateTime? @default(now()) @db.Timestamp(6)
  updatedAt  DateTime? @default(now()) @db.Timestamp(6)
  users      users     @relation(fields: [userId], references: [id], onDelete: Cascade, onUpdate: NoAction)
}

model users {
  id           String      @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  email        String      @unique
  phone        String      @unique
  password     String
  firstName    String
  lastName     String
  isVerified   Boolean?    @default(false)
  is2FAEnabled Boolean?    @default(false)
  role         Role?       @default(CLIENT)
  otp          String?
  otpExpiry    DateTime?   @db.Timestamp(6)
  profileImage String?
  createdAt    DateTime?   @default(now()) @db.Timestamp(6)
  updatedAt    DateTime?   @default(now()) @db.Timestamp(6)
  addresses    addresses[]
}

enum Role {
  CLIENT
  ADMIN
}
